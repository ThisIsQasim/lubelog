@model List<UserModel>
<div class="row">
    <div class="d-flex justify-content-between">
        <div class="d-flex align-items-center flex-wrap">
            <span class="ms-2 badge bg-success">@($"# of Users: {Model.Count()}")</span>
        </div>
        <div>
                <button onclick="showAddUser()" class="btn btn-primary btn-md mt-1 mb-1"><i class="bi bi-pencil-square me-2"></i>Add User</button>
        </div>
    </div>
</div>
<div class="row vehicleDetailTabContainer">
    <div class="col-12">
        <table class="table table-hover">
            <thead>
                <tr class="d-flex">
                    <th scope="col" class="col-3">Username</th>
                    <th scope="col" class="col-2">Can Add</th>
                    <th scope="col" class="col-2">Can Edit</th>
                    <th scope="col" class="col-2">Can Delete</th>
                    <th scope="col" class="col-2">Is Active</th>
                    <th scope="col" class="col-1">Delete</th>
                </tr>
            </thead>
            <tbody>
                @foreach (UserModel user in Model)
                {
                    <tr class="d-flex" style="cursor:pointer;">
                        <td class="col-3">@user.UserName</td>
                        <td class="col-2">@user.CanAdd</td>
                        <td class="col-3">@user.CanEdit</td>
                        <td class="col-3">@user.CanDelete</td>
                        <td class="col-3">@user.IsActive</td>
                        <td class="col-3"><button type="button" class="btn btn-danger" onclick=""><i class="bi bi-trash"></i></button></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
<script>
    function showAddUser() {
        Swal.fire({
            title: 'Setup Credentials',
            html: `
                        <input type="text" id="authUsername" class="swal2-input" placeholder="Username">
                        <input type="password" id="authPassword" class="swal2-input" placeholder="Password">
                        `,
            confirmButtonText: 'Setup',
            focusConfirm: false,
            preConfirm: () => {
                const username = $("#authUsername").val();
                const password = $("#authPassword").val();
                if (!username || !password) {
                    Swal.showValidationMessage(`Please enter username and password`)
                }
                return { username, password }
            },
        }).then(function (result) {
            if (result.isConfirmed) {
                $.post('/Login/CreateUser', { userName: result.value.username, password: result.value.password }, function (data) {
                    if (data) {
                        //callback to reload users page.
                    } else {
                        errorToast("An error occurred, please try again later.");
                    }
                });
            };
        });
    }
</script>